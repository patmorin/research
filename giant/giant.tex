\documentclass{patmorin}
\usepackage{amsthm,amsmath,graphicx,stmaryrd,url}
\usepackage{pat}

\newcommand{\eps}{\varepsilon}

\title{\MakeUppercase{Robust Geometric Spanners}}
\author{Prosenjit Bose, Vida Dujmovi\'c, Pat Morin, and Michiel Smid}



\begin{document}
\maketitle

\begin{abstract}
  We consider a new definition of fault-tolerance for geometric
  $t$-spanners that we dub robustness.  
  % TODO: Fix this
  % A $t$-spanner is $f(k)$-robust
  % if, for all $k$, the removal of any $k$ vertices leaves an induced
  % subgraph with at least $n-f(k)$ vertices that is a $t$-spanner.
  We prove that $f(k)$-robust spanners have a superlinear number of
  edges, even in one dimension, and give upper bounds on the number of
  edges in $f(k)$-robust spanners in any dimension.
\end{abstract}

\section{Introduction}

Let $V\subset \R^d$ be a set of $n$ points in $\R^d$.  An undirected
graph $G=(V,E)$ is a (geometric) $t$-spanner of $V^-\subseteq V$ if,
for every pair $x,y\in V^-$,
\[
  \frac{\|xy\|_G}{\|xy\|} \le t \enspace ,
\]
where $\|xy\|$ denote the Euclidean distance between $x$ and $y$ and
$\|xy\|_G$ denotes the length of the Euclidean shortest path from $x$
to $y$ that uses only edges in $G$.  Here we use the convention that
$\|xy\|_G=\infty$ if there is no path, in $G$, from $x$ to $y$.

Geometric $t$-spanners have been studied extensively and have applications
in robotics, graph theory, data structures, wireless networks, and
network design.  The recent book \cite{ns07} and handbook chapter
\cite{e99} provide extensive discussions of geometric spanners and
their applications.

For a graph $G=(V,E)$ and a subset $S\subseteq V$ of $G$'s vertices,
we denote by $G\setminus S$ the graph obtained by removing the elements
of $S$ from $V$, and their incident edges from $E$.  A graph $G$ is an
\emph{$(f(k),g(n))$-robust $t$-spanner} of $V$ if, for every subset
$S\subseteq V$, there exists a superset $S^+\supseteq S$, $|S^+|\le
f(|S|)\cdot g(|V|)$, such that $G\setminus S$ is a $t$-spanner of
$V\setminus S^+$.  If $g(n)=1$, then we say simply that $G$ is an
$f(k)$-robust $t$-spanner.

An example is shown in \figref{grid} which suggests that the
$\sqrt{n}\times\sqrt{n}$ grid graph is an $O(k^2)$-robust 3-spanner.
The set $S^+$ in this example is obtained by choosing ``disjoint''
squares that cover the vertices of $S$ and adding to $S^+$ any vertices
contained in these squares.  (A proof that the grid graph is indeed an
$O(k^2)$-robust spanner is sketched in \secref{summary}.)

\begin{figure}
  \begin{center}
    \includegraphics{grid}
  \end{center}
  \caption{From the set $S$ (whose elements are denoted by \textbullet)
  we find a superset $S^+$ (whose elements are denoted by $\times$)
  so that $G\setminus S^+$ (whose vertices are denoted by $\circ$) is a 3-spanner.}
  \figlabel{grid}
\end{figure}

One can think of an $f(k)$-robust $t$-spanner in terms of network
reliability.  If a network is an $f(k)$-robust $t$-spanner, and $k$ nodes
of the network fail, then the graph remains a $t$-spanner of $n-f(k)$
of its nodes.  Intuitively, most of the network survives the removal of
$k$ nodes, provided that $k$ is small enough that $f(k)\ll n$.

\subsection{Robustness versus Fault-Tolerance}

Robustness is related to, but different from, $r$-fault tolerance.
An \emph{$r$-fault-tolerant} $t$-spanner, $G=(V,E)$, has the property
that $G\setminus S$ is a $t$-spanner of $V\setminus S$ for any subset
$S\subseteq V$ of size at most $r$. At a minimum, an $r$-fault-tolerant
spanner must remain connected after the removal of any $r$ vertices.
This immediately implies that any $r$-fault-tolerant spanner with $n>r$
vertices has at least $(r+1)n/2$ edges, since every vertex must have
degree at least $r+1$.  Several constructions of $r$-fault-tolerant
spanners having $O(rn)$ edges exist \cite{cz04,lns02,l99}.

In contrast, surprisingly sparse $f(k)$-robust $t$-spanners exist.
For example, we show that for one-dimensional point sets, there exists
$O(k\log k)$-robust 1-spanners having $O(n\log n)$ edges; the removal of
any set of $o(n/\log n)$ vertices leaves a subgraph of size $n-o(n)$ that
is a $t$-spanner.  An $r$-fault tolerant spanner with $r=n/\log n$ also
has this property, but all such spanners have $\Omega(n^2/\log n)$ edges.

We suggest that in many applications where an $r$-fault tolerant
spanner is used, an $f(k)$-robust spanner may be a better choice.
For example, one might build an $r$-fault tolerant spanner so that a
network survives up to $r$ faults, perhaps because more than $r$ faults is
viewed as unlikely.  Using an $f(k)$-robust spanner instead means that,
if $r'\le r$ faults do occur, then the network loses up to $f(r')-r'$
non-faulty nodes but continues to operate correctly for the remaining
$n-f(r')$ nodes.  In one case, the network loses $r'$ nodes while in the
other case the network loses $f(r')$ nodes.  For slow-growing functions
$f$ this may be perfectly acceptable.

The use of an $f(k)$-robust spanner in place of an $r$-fault tolerant
spanner has the additional advantage that, in the unlikely event that $r'>
r$ faults occur, the network continues to remain usable.  In particular,
after $r'>r$ faults, the usable network has size at least $n-f(r')$. In
contrast, even with $r'=r+1$ faults, an $r$-fault tolerant spanner may
have no component of size larger than $n/2$; see \figref{rft-problem}
for an example.

\begin{figure}
  \begin{center}
    \includegraphics{rft-problem}
  \end{center}
  \caption{In an $r$-fault tolerant spanner, removing $r+1$ vertices may
  disconnect the graph in such a way that no component has size greater
  than $n/2$.}
  \figlabel{rft-problem}
\end{figure}

\subsection{Robustness and Magnification}

A function $h$ is called a \emph{magnification
(or vertex-expansion) function} for the graph $G=(V,E)$ if, for all
$S\subseteq V$,
\[
    |N(S)| \ge h(|S|) \enspace ,
\]
where $N(S)$ denote the set of vertices in $V\setminus S$ that are
adjacent to vertices in $S$.  Of particular interest are graphs
that have a magnification function $h(x)=cx$, for $c>1$, and all
$x\in\{0,\ldots,|V|/2\}$, since these graphs are \emph{vertex expanders},
which have a long history and an enormous number of applications
\cite{hlw06}.

If $G$ is $f(k)$-robust, then $G$ has a magnification function,
$h$, that satisfies $h(x) \ge k$, for all $x> f(k)-k$ and every
$k\in\{1,\ldots,|V|\}$; see \figref{magnification}.  If not, then
there exists, a set $S''$ of size $x>f(k)-k$ such that $|N(S'')|<
k$.  Taking $S=N(S'')\cup\{x_1,\ldots,x_{k-|N(S'')|}\}$, where each
$x_i\in V\setminus N(S'')$ yields a set, $S$, of size $k$ such that
$G\setminus S$, has no component of size greater than $n-x < n-f(k)$.

\begin{figure}
  \begin{center}
    \includegraphics{magnification}
  \end{center}
  \caption{If $G$ does not have a magnification function, $h$, with
  $h(x)\ge k$, for all $x> f(k)-k$, then $G$ is not $f(k)$-robust.}
  \figlabel{magnification}
\end{figure}

If we think of $f(k)$ as a continuous increasing function (and hence
invertible) then the above argument says that any $f(k)$-robust spanner has a magnification function
$h(x) \in \Omega(f^{-1}(x))$.  This is as far as the relationship between
magnification and robustness goes.  There exist expander graphs with a
linear number of edges \cite{hlw06}, so they have magnification functions
of the form $h(x)=cx$, with $c>1$.  However, these graphs can not be
$f(k)$-robust since, in \thmref{general-lower-bound-1d}, we show that
$f(k)$-robust spanners have a superlinear number of edges.


\subsection{Overview of Results}

In this paper, we prove upper and lower bounds on the size (number of
edges) needed to achieve $f(k)$-robustness and $(f(k),g(n))$-robustness.
These bounds are expressed as a dependence on the function $f(k)$.
In particular, the number of edges depends on the function $f^*(n)$,
which is the maximum number of times one can iterate the function $f$ on
an initial input $k_0$ before exceeding $n$.  As a concrete example, if
$f(k)=2k$, then  $f^*(n)=\floor{\log_2 n}$ (with the initial input $k_0=1$).

Our most general lower-bound, \thmref{general-lower-bound-1d},
states that there exists one-dimensional point sets of size $n$
for which any $f(k)$-robust spanner has size $\Omega(nf^*(n))$.
For one-dimensional point sets, we can almost match this lower-bound:
\thmref{general-1d} states that any one-dimensional point set of
size $n$ has an $O(f(k)f^*(k))$-robust spanner of size $O(nf^*(n))$.
Furthermore, if $f(k)$ is sufficiently fast-growing, this construction
is $O(f(k))$-robust, and hence has optimal size.  For point sets in
dimension $d>1$, our upper and lower bounds diverge by a factor of $k$.
\thmref{dd} shows that for any set of $n$ points in $\R^d$ there exists
an $O(kf(k))$-robust spanner of size $O(nf^*(k))$.

The remainder of the paper is organized as follows:  \Secref{one-d}
gives results for 1-dimensional point sets, \secref{d-d} gives results
for $d$-dimensional point sets, and \secref{summary} summarizes and
concludes with directions for further research.


\section{One-Dimensional Point Sets}
\seclabel{one-d}

In this section, we consider constructions of robust $t$-spanners for
1-dimensional point sets.  Throughout this section $V=\{x_1,\ldots,x_n\}$
is a set of real numbers with $x_1<x_2<\cdots<x_n$.

\subsection{An $O(k\log k)$-robust spanner with $O(n\log n)$ edges}

We now consider the following graph, $G_{2\times}=(V,E)$ which is
closely related to the hypercube.   The edge set, $E$, of $G_{2\times}$
consists of
\[
  E = \{x_ix_{i+2^j} : j\in\{0,\ldots,\floor{\log n}\},\, 
        i\in\{1,\ldots,n-2^j\} \} \enspace .
\] 
Notice that $G_{2\times}$ is a 1-spanner since it contains every every
edge of the form $x_i,x_{i+1}$, for $i\in\{1,\ldots,n-1\}$. Furthermore,
$G_{2\times}$ has size $O(n\log n)$ since every vertex has degree at most
$2\floor{\log n}+2$.  We now prove an upper-bound on the robustness of
$G_{2\times}$ by using the probabilistic method.

\begin{thm}\thmlabel{better-upper-bound-1d}\thmlabel{klogk-1d}
  Let $V\subset \R$ be any set of $n$ real numbers.  Then there exists
  an $O(k\log k)$-robust $1$-spanner of $V$ of size $O(n\log n)$.
\end{thm}

\begin{proof}
  Consider any set $S\in\binom{V}{k}$.  Select a random integer
  $r\in\{0,\ldots,2^{\ceil{\log n}}-1\}$ and consider the subgraph,
  $G'$, of $G_{2\times}$ consisting only of the edges of the form
  $(x_i,x_{i+\ell})$ where $i-r$ is a multiple of $\ell$.  (For readers
  with a background in data structures, this subgraph looks a lot like a
  skiplist in which $x_r$ appears at the top level; see \figref{g-prime}.)

  \begin{figure}
    \begin{center}
      \includegraphics{robust-1}
    \end{center}
    \caption{The graph $G'$}
    \figlabel{g-prime}
  \end{figure}

  For a vertex $x_i\in S$, let $j$ be the largest integer such that
  $i-r$ is a multiple of $2^j$.  Then we say that $x_i$ \emph{kills}
  the vertices $x_{i-2^{j}+1},\ldots,x_{i+2^{j}-1}$ in $G'$; see
  \figref{killing}.  When this happens, the \emph{cost} of $x_i$ is
  $c(x_i)=2^{j+1}-1$.  Observe that, unless $i<2^{j}$ or $i>n-2^{j}$, $G'$
  contains the edge $x_{i-2^{j}}x_{i+2^{j}}$ that ``jumps over'' all the
  vertices killed by $x_i$.  Therefore, if we define $S^+$ to be the set
  of all vertices killed by vertices in $S$, then $G'\setminus S$ (and
  hence also $G_{2\times}\setminus S$) is a 1-spanner of $V\setminus S^+$.
  
  \begin{figure}
    \begin{center}
      \includegraphics{robust-2}
    \end{center}
    \caption{Constructing the set $S^+$ (whose elements are denoted
    by $\times$)
      from the set $S$ (whose elements are denoted by \textbullet).}
    \figlabel{killing}
  \end{figure}
  
  We say that a vertex $x\in S$ is \emph{cheap} if $c(x) < 4k$ and
  \emph{expensive} otherwise.  We call our choice of $r$ a \emph{failure}
  if
  \begin{enumerate}
    \item $\mathcal{A}$: any vertex of $S$ is expensive; or
    \item $\mathcal{B}$: the total cost of all cheap vertices exceeds
      $16k\log k$
  \end{enumerate}
  We declare our choice of $r$ a \emph{success} if neither $\mathcal{A}$
  nor $\mathcal{B}$ holds.  Observe that, in the case of a success, we
  obtain a set $S^+$, $|S^+|\le ck\log k$, such that $G_{2\times}\setminus
  S$ is a 1-spanner of $S^+$.  Therefore, all that remains is to show that the
  probability of success is greater than 0.
  
  We first note that the probability any particular $x_i\in S$ is
  expensive is at most $1/4k$.  This is because $x_i$ is expensive if and
  only if $(r-i)\equiv 0 \pmod {2^{\ceil{\log(4k)}}}$.  The probability
  of selecting $r$ with this property is only $1/2^{\ceil{\log(4k)}}
  \le 1/4k$. Therefore, by the union bound,
  \[
     \Pr\{\mathcal{A}\} \le k/4k = 1/4 \enspace .
  \]

  To upper-bound the total expected cost of cheap vertices, we note that,
  if $x_i\in S$ kills $2^{j+1}-1$ vertices, then $r-i\equiv 0\pmod{2^j}$.
  The probability that this happens is $1/2^{j}$. 
  Letting $S^{c}$
  denote the set of cheap vertices in $S$, the total expected cost of
  all cheap vertices is at most
  \begin{eqnarray*}
     \E\left[\sum_{x\in S^{c}}c(x) \right] 
     &\le& \E\left[\sum_{x\in S}\min\{4k,c(x)\} \right]  \\
    &\le&  k\sum_{j=0}^{\floor{\log (4k)}} (2^{j+1}-1)/2^j \\
     &\le& k\sum_{j=0}^{\floor{\log (4k)}} 2^j \\
     &<& 8k\log k \enspace .
  \end{eqnarray*}
  Therefore, by Markov's Inequality, $\Pr\{\mathcal{B}\}\le 1/2$.
  By the union bound
  \[
     \Pr\{\mbox{$\mathcal{A}$ or $\mathcal{B}$}\} \le 1/4+ 1/2 < 1
  \enspace . \qedhere
  \]
\end{proof}

\subsection{A General Construction}
\seclabel{iterated}

Let $k_0\ge 1$ be a constant and let $f:\R\rightarrow\R$ be any function
that is weakly convex, increasing over the interval $[k_0,\infty)$,
and such that $f(k_0+1)-f(k_0) > 1$.  Let $f^{i}(k)$ be the function $f$
iterated $i$ times on the initial value $k$, i.e.,
\[
   f^{i}(k) = \underbrace{f(f(f(\cdots f}_{i}(k)\cdots))) \enspace .
\]
We use the convention that $f^0(x) = k_0$ for all $x$.
Then we define the \emph{iterated
$f$-inverse function}
\[
   f^*(n) = \max\{i : f^{i}(k_0) \le n\} \enspace .
\] 
Notice that, for any $k> k_0$, there exists $i$ such that
\[
   f^i(k_0) < k \le f(f^i(k_0)) \enspace .
\]
In particular, the sequence $k_0,f(k_0),f^2(k_0),\ldots,$ contains
a value $f^{i+1}(k_0)$ such that
\[
      k  \le  f^{i+1}(k_0) < f(k) \enspace .
\]
Another important property is that, since $f(k)$ is increasing
and convex, $f(x)/x$ is non-decreasing: For every $\Delta\ge 0$,
$f(x+\Delta)/(x+\Delta) \ge f(x)/x$.

\newcommand{\upen}[1]{\llceil#1\rrceil}

For a positive number $x$, we define $\upen{x}=2^{\ceil{\log x}}$, as the
smallest power of 2 greater than or equal to $x$.  Given such a function,
$f$, we define the graph $G_f=(V,E)$ to have the edge set:
\begin{eqnarray*}
    E &=& \quad\left\{ x_ix_{i+1} : i\in\{1,\ldots,n-1\} \right\} \\
     && {} \cup \left\{ x_{i}x_{i+\upen{f^j(k_0)}} : j\in\{0,\ldots,f^*(n)\},\,
        i\in\{1,\ldots,n-\upen{f^j(k_0)}\} \right\}
\end{eqnarray*}
The graph $G_f$ clearly has $O(nf^*(n))$ edges.  The following theorem shows that this graph is robust:

\begin{thm}\thmlabel{general-1d}
  Let $f$, $f^*$, $k_0$, and $G_f$ be defined as above.  Then the graph
  $G_f$ has $O(nf^*(n))$ edges and is
  \begin{enumerate}
    \item $O(f(4k)f^*(k))$-robust; and 
    \item $O(f(4k))$-robust if $f(k)\in k2^{\Omega(\sqrt{\log k})}$.
  \end{enumerate}
\end{thm}

\begin{proof}
  We proceed as in the proof of \thmref{klogk-1d}.  Select a random
  integer $r\in\{0,\ldots,\upen{f^{f^*(n)+1}(k_0)}\}$.  We consider the
  subgraph $G'$ of $G_f$ that contains only the edges $x_ix_{i+\ell}$
  where $i-r$ is an integer multiple of $\ell$.  We say that an edge
  $x_ix_{i+\ell}$ has \emph{span} $\ell$.

  For an integer $i$, let $j=j(i)$ be the smallest integer such that
  $i-r$ is not a multiple of $\upen{f^j(k_0)}$; see \figref{spanjump}.
  Informally, if there exists any edge that jumps over $x_i$, then an
  edge of span $\upen{f^j(k_0)}$ jumps over $x_i$.  Then we say that a
  vertex $x_i\in S$ kills $x_{i-p},\ldots,x_{i+q}$ where
  \begin{eqnarray*}
     p&=& \left((i-r) \bmod \upen{f^j(k_0)}\right)+1 \text{ and } \\
     q&=& \left((r-i) \bmod \upen{f^j(k_0)}\right)-1 \enspace .
  \end{eqnarray*}
  \begin{figure}
    \begin{center}
      \includegraphics{spanjump}
    \end{center}
    \caption{The vertices killed by $x_i$.}
    \figlabel{spanjump}
  \end{figure}
  
  Define $c(x_i)$ as the number of vertices killed by $x_i$.  We say
  that $x_i$ is \emph{expensive} if $c(x_i) > f(4k)$ and \emph{cheap}
  otherwise.  If $x_i$ is expensive, then $f^{j(i)-1}(k_0)\ge 4k$ and
  $i-r\equiv 0 \pmod {f^{j(i)-1}(k_0)}$.  Therefore, the probability
  that $x_i$ is expensive is at most $1/f^{j(i)-1}(k_0) \le 1/4k$.
  Therefore, by the union bound, the probability that $S$ contains any
  expensive vertex is at most $1/4$.  All that remains is to bound the
  expected cost of all cheap vertices. Letting $S^c$ denote the set of
  cheap vertices in $S$, we obtain
  \begin{align*}
     \E\left[\sum_{x\in S^c} c(x)\right] 
      & \le  k \sum_{j=0}^{f^*(4k)} \upen{f^{j+1}(k_0)}/\upen{f^j(k_0)} \\
      & \le  2k \sum_{j=0}^{f^*(4k)} f^{j+1}(k_0)/f^j(k_0) \\
      & =  2k \sum_{j=0}^{f^*(4k)} f(f^{j}(k_0))/f^j(k_0) \\
      & \le  2k \sum_{j=0}^{f^*(4k)} f(4k)/4k 
           & \text{(since $f(x)/x$ is non-decreasing)} \\
      & \le  (1/2)f(4k)f^*(4k) \enspace .
  \end{align*}
  Again, Markov's Inequality implies that the probability that the total
  cost of all cheap vertices exceeds $f(4k)f^*(4k)$ is at most $1/2$.
  Therefore, the probability of finding a set $S^+$ of size at most
  $f(4k)f^*(4k)$ is at least
  \[  
     1 - 1/2 - 1/4 > 0 
  \]
  which proves the existence of such a set $S^+$.
  
  To prove the second part of the theorem, we proceed exactly the
  same way, except that the sequence $f^{j+1}(k_0)/f^j(k_0)$ becomes
  geometric,\footnote{This is most easily seen by
  taking $f(k) = k\delta^{2\sqrt{(\log k)/(\log\delta)}+1}$.  It is
  straightforward to verify, then that $f^j(\delta) = \delta^{(j+1)^2}$,
  so that $f^{j+1}(\delta)/f^j(\delta)= \delta^{2j+3}$, so the sequence
  is exponentially increasing.  Taking $\delta = 1+\epsilon$ for a
  sufficiently small $\epsilon>0$ allows us to lower-bound any function
  $f(k)\in k2^{\Omega(\sqrt{\log k})}$ this way.} so it is dominated by
  its last term.  This yields:
  \begin{align*}
  \E\left[\sum_{x\in S^c} c(x)\right] 
      & \le  k \sum_{j=0}^{f^*(4k)} \upen{f^{j+1}(k_0)}/\upen{f^j(k_0)} \\
      & \le  2k \sum_{j=0}^{f^*(4k)} f^{j+1}(k_0)/f^j(k_0) \\
      & \le  2ck\left(\frac{f(f^{f^*(4k)}(k_0))}{f^{f^*(4k)}(k_0)}\right) 
            & \text{(since the sum is geometric)} \\
      & \le  2ck\left(\frac{f(4k)}{4k}\right) 
            & \text{(since $f(x)/x$ is non-decreasing)} \\
      & \le  (c/2)f(4k) \enspace ,
  \end{align*}
  as required.
\end{proof}


Applying \thmref{general-1d} with different functions $f(k)$ yields the
following results.
\begin{cor}
  For any set $V$ of $n$ real numbers, and any constant $\eps >0$,
  there exists $f(k)$-robust 1-spanners with
  \begin{enumerate}
    \item $f(k)\in O(k\log k)$ and $O(n\log n)$ edges;
    \item $f(k)\in O(k(1+\eps)^{\sqrt{\log n}})$ and $O(n\sqrt{\log n})$
      edges; and
    \item $f(k)\in O(k^{(1+\eps)})$ and $O(n\log\log n))$ edges.
  \end{enumerate}
\end{cor}


\subsection{Lower Bounds}

In this section, we give lower-bounds on the number of edges in
$f(k)$-robust $t$-spanners.  These lower-bounds hold already for a
specific 1-dimensional point set, therefore they apply to all dimensions
$d\ge 1$.

\subsubsection{A Lower Bound for Linear Robustness}

We begin by focusing on the hardest case, $f(k) \in O(k)$.

\begin{thm}\thmlabel{simple-lower-bound-1d}
  Let $V=\{1,\ldots,n\}$ and let $t\ge 1$ be a constant.  Then any
  $O(k)$-robust $t$-spanner of $S$ has $\Omega(n\log n)$ edges.
\end{thm}

\begin{proof}
  Fix an even natural number $k$ and consider some
  $i\in\{ck,\ldots,n-ck\}$.  We claim that if $G=(V,E)$ is a
  $ck$-robust\footnote{Note that we have gone from $O(k)$-robust in the
  statement of the theorem to $ck$-robust in the proof.  This does not
  cause a problem so long as we only consider values of $k$ greater
  than some constant $k_0$ hidden in the $O$ notation.} $t$-spanner,
  then $G$ has at least $k/2$ edges, $xy$, such that $x < i < i+k/2 <
  y$ and such that $y-x \le ctk$.  If this is not the case, then there
  exists a set $S$, $|S|\le k$, such that any edges of $G$ with one
  endpoint to the left of $S$ and one endpoint to the right of $S$
  have length at least $ctk$.

  In particular, for any $S^+\supseteq S$, with $|S^+|\le ck$, there will
  exist two vertices $x,y\not\in S^+$, with $\|xy\|\le ck$ such that the
  only path from $x$ to $y$ in $G\setminus S$ uses an edge of length
  greater than $ctk$.  Thus, $G\setminus S$ is not a $t$-spanner of $S^+$.

  Applying the above argument to $i=ck+2jtck$, for
  $j\in\{0,\ldots,\floor{(n-ck)/2tck}\}$ implies that $G$ contains
  $\Omega(n/tc)$ edges whose length is in the range $[k/2,ctk]$.
  Applying this argument for $k\in\{\ceil{(2tck_0)^{j}} :
  j\in\{0,\ldots,\floor{(\log n)/\log(2tck_0)}\}$ proves that, for any
  constants $c,k_0,t>1$, $G$ has $\Omega(n\log n)$ edges.
\end{proof}


\subsubsection{A General Lower Bound}\seclabel{generalized}

Using the iterated functions from \secref{iterated}, we obtain a whole
class of lower-bounds.

\begin{thm}\thmlabel{general-lower-bound-1d}
  Let $k_0$, $f$, and $f^*$ be defined as in \secref{iterated}, and let
  $S\subset \R$ be any set of $n$ real numbers.  Let $S=\{1,\ldots,n\}$
  and let $t\ge 1$ be a constant.  Then any $f(k)$-robust $t$-spanner
  of $S$ has $\Omega(nf^*(n))$ edges.
\end{thm}

\begin{proof}[Proof Sketch]
  The proof is similar to the proof of \thmref{simple-lower-bound-1d}.
  We need only consider $f(k)\in\omega(k)$ since, otherwise we can apply
  \thmref{simple-lower-bound-1d}.  We group the edges of the graph
  $G$ into $\Omega(f^*(n))$ classes and show that each class contains
  $\Omega(n)$ vertices.  In this case, the edges in each class have
  lengths in a range of the form $[f^i(k_0),tcf^{i}(k_0)]$.  For large
  enough $i$, these classes do not overlap since $f(k)\in\omega(k)$.
\end{proof}

\begin{cor}
  Let $V=\{1,\ldots,n\}$ and let $c>1$ and $t>1$ be constants.  Then any
  $f(k)$-robust $t$-spanner with
  \begin{enumerate}
    \item $f(k)\in O(k\log k)$ has $\Omega(n\log n/\log\log n)$ edges;
    \item $f(k)\in O(kc^{\sqrt{\log n}})$ has $\Omega(n\sqrt{\log n})$
      edges; and
    \item $f(k)\in O(k^{c})$ has $\Omega(n\log\log n))$ edges.
  \end{enumerate}
\end{cor}

Note that the lower-bounds in Parts~2 and 3 of this corollary match the
corresponding upper-bounds while the lower-bound in Part~1 is off by a
factor of $\log\log n$.


\section{Higher Dimensions}
\seclabel{d-d}

In this section, we give a family of constructions for point sets
$V\subset\R^d$, $d\ge 1$.  These constructions make use of dumbbell
tree spanners \cite[Chapter~11]{ns07}.  In particular, they make use of
binary dumbbell trees, first used by Arya \etal\ \cite{admss95} in the
construction of low-diameter bounded-degree spanners.  A full description
of the construction (and proof of existence) of binary dumbbell trees
can be found in the notes by Smid \cite{s12}.

A \emph{(binary) dumbbell tree spanner} of $V$ is defined by a set of
$O(1)$ binary trees $\mathcal{T}=\{T_1,\ldots,T_p\}$.  Each node, $u$,
of each binary tree is associated with a point, $r(u)\in V$.  Each tree
$T_i$ has $n$ leaves, each associated with a unique one for each point
in $V$.  Each point in $V$ is associated with at most one of $T_i$'s
internal nodes.  Thus, any point in $V$ is associated with at most 2
nodes of $T_i$ for each $i\in \{1,\ldots,p\}$.

These trees have the property that, for any two points $x,y\in V$,
there exists some tree $T_i$ with two leaves $u$ and $v$ such that
$r(u)=x$, $r(v)=y$ and the path, $u,\ldots,v$ in $T_i$ defines a path
$r(u),\ldots,r(v)$ whose Euclidean length is at most $t'\|xy\|$, where
$t'>1$ is a parameter in the construction of the dumbbell tree.  Thus,
the graph $G=(V,E)$ obtained by taking 
\[
   E = \bigcup_{i=1}^p\{r(u)r(v) : \text{$uv$ is an edge of $T_i$} \}
\]
is a $t'$-spanner of $V$.

\begin{thm}\thmlabel{dd}
  Let $k_0$, $f$, and $f^*$ be defined as in \secref{iterated}.
  Let $V\subset \R^d$ be any set of $n$ points in $\R^d$.  Then, for any
  constant $t>1$,  there exists a $O(kf(k))$-robust $t$-spanner of $V$
  with $O(nf^*(n))$ edges.
\end{thm}

\begin{proof} 
  Fix a value $k$ and recall that, in any binary tree, $T$, with $n$
  nodes, there exists a vertex whose removal disconnects $T$ into at
  most 3 components each of size at most $n/2$.  Repeatedly applying
  this fact yields a set of $O(n/k)$ vertices whose removal disconnects
  $T$ into components of size at most $k$; see \figref{dumbbell-chop}.
  Perform this decomposition for each of the trees $T_1,\ldots,T_p$ in a
  dumbbell tree spanner to obtain a set of $X$ of $O(n/k)$ vertices whose
  removal disconnects every tree in $T$ into components each of size at
  most $k$.  Using any of the $k$-fault tolerant spanner constructions
  discussed in the introduction, we can construct a $k$-fault tolerant
  $t'$-spanner for $X$ having $O(k|X|)=O(n)$ edges.  Let $G_k=(V,E_k)$
  denote the graph whose edge set contains all edges of the dumbbell
  spanner and all edges of the $k$-fault tolerant spanner on $X$.
  
  \begin{figure}
    \begin{center}
      \includegraphics{dumb-1}
    \end{center}
    \caption{A dumbbell tree decomposed in components of size $O(k)$
    by the removal of a set $X$ of $O(n/k)$ vertices (each denoted
    by $\circ$).}
    \figlabel{dumbbell-chop}
  \end{figure}
  
  Suppose that we are now given a set $S\subseteq V$, $|S|\le k$.
  Any vertex $x\in S$ appears at most twice in each tree $T_i$.  We say
  that $x$ kills all the vertices in any component of $T_i\setminus X$
  that contains $x$.  Furthermore, if $x\in X$, the $x$ kills the (at most
  2) components whose roots have $x$ as a parent.  The total number of
  vertices killed by $x$ is therefore $O(k)$; see \figref{dumbbell-kill}.

  \begin{figure}
    \begin{center}
      \includegraphics{dumb-2}
    \end{center}
    \caption{The set $S$ (whose elements are denoted by \textbullet) kill
      $O(|S|k)$ vertices in each dumbbell tree.}
    \figlabel{dumbbell-kill}
  \end{figure}
  
  Let $S^+$ be the set of all vertices killed by all vertices in $S$ and
  consider some pair of vertices $x,y\in V\setminus S^+$.  There exists
  a tree $T_i$ such that the path in $T_i$ from the leaf containing $x$
  to the leaf containing $y$ has length at most $t'\|xy\|$.  If the
  leaves of $T_i$ containing $x$ and $y$ are in the same component of
  $T_i\setminus X$ then the path in $T_i$ from $x$ to $y$ is also a path
  in $G_k\setminus S$ and this path has length $t'\|xy\|$.

  If $x$ and $y$ are in different components of $T_i\setminus X$ then
  $G_k\setminus S$ contains a path, from $x$ up to the lowest ancestor,
  $x'$, of $x$ that appears in $X$.  Similarly, $G_k\setminus S^+$
  contains a path from $y$ up to the lowest ancestor, $y'$, of $y$ that
  appears in $X$.  Finally, since $G_k$ contains a $k$-fault tolerant
  $t'$-spanner on the vertices of $X$, and $|S|\le k$, there is a path
  in $G_k\setminus S$ from $x'$ to $y'$ of length at most $t'\|x'y'\|$.
  Therefore, $G_k\setminus S$, contains a path from $x$ to $y$ of length
  at most $(t')^2\|xy\|$.  Taking $t'=\sqrt{t}$ shows that $G_k\setminus
  S$ is a $t$-spanner of $V\setminus S^+$.

  We have just shown how to construct a graph $G_k$ that has $O(n)$
  edges and is $O(k^2)$ robust provided that $|S|\le k$.  To obtain
  a graph that is $kf(k)$-robust for any value of $k$, we take the
  graph $G$ containing the edges of each $G_k$ for $k\in\{f^i(k_0) :
  i\in\{0,\ldots,f^*(k)\}\}$.  The graph $G$ has $O(nf^*(n))$ edges.
  For any set $S\in \binom{V}{k}$, we can apply the above argument
  on the subgraph $G_{k'}$ with $k \le k' < f(k)$, to show that $G$
  is $(O(kf(k)),1)$-robust.
\end{proof}

\subsection{Linear-Size Robust Spanners}

Finally, we show that linear size robust spanners exist.

\begin{thm}\thmlabel{linear-size}
  If $(f(k),g(n))$-robust $t$-spanners with $O(n s(n))$ edges exist for
  all $V\subset\R^d$, then $(f(k),s(n)g(n))$-robust $t$-spanners with
  $O(n)$ edges exist for all $V\subset\R^d$.
\end{thm}

\begin{proof}
  Perform the same dumbbell tree decomposition used in the proof of
  \thmref{dd} to obtain a set $X$ of $O(n/s(n))$ nodes whose removal
  partitions each dumbbell tree into components of size at most $s(n)$.
  Construct an $(f(k),g(n))$-robust $t$-spanner on the elements of $X$.
  The same argument used to prove \thmref{dd} shows that the resulting
  construction is $O(f(k),s(n)g(n))$ robust.  (Each vertex of $X$ that
  belongs to $S$ results in the loss of at most 2 components in each
  dumbbell tree, each of size at most $s(n)$.)
\end{proof}

The following corollary is obtained by combining \thmref{linear-size}
with some of our upper-bound constructions:
\begin{cor}
  There exist linear size
  \begin{itemize}
    \item $(O(k\log k),O(\log n))$-robust $1$-spanners of any
      $V\subset \R$;
    \item $(O(k^{1+\eps}),O(\log\log n))$-robust $1$-spanners of any
      $V\subset \R$;
    \item $(O(k^2\log k), O(\log n))$-robust $t$-spanners of any
      $V\subset \R^d$; and
    \item $(O(k^{2+\eps}), O(\log\log n))$-robust $t$-spanners of any
      $V\subset \R^d$.
  \end{itemize}
\end{cor}

\section{Summary}
\seclabel{summary}

We have introduced the notion of $(f(k),g(n))$-robust $t$-spanners and
given upper and lower-bounds on the number of edges in such spanners.
Our lower bounds show that, if $g(n)\in O(1)$, then any such spanner
must have a superlinear number of edges, even in one dimension.
Our 1-dimensional constructions nearly match this lower-bound except
when the function $f$ is nearly linear.

We understand the situation less clearly in two and higher dimensions.
The lower bounds show that $f(k)$-robust $t$-spanners must have
$\Omega(nf^*(n))$ edges, but we have only been able to obtain
$O(kf(k))$-robust $t$-spanners with $O(nf^*(n))$ edges.  Closing this
gap is the main open problem left by this work.

To gain some intuition about which is correct, the lower bound
or the upper bound, one can study the $\sqrt{n}\times\sqrt{n}$
grid graph; see \figref{grid}.  An argument similar to the proof of
\thmref{klogk-1d} based on randomly shifting a quadtree shows that this
graph is an $O(k^2)$-robust $2$-spanner.  Therefore, the vertices of
the $\sqrt{n}\times\sqrt{n}$ grid admit a linear-size $O(k^2)$-robust
3-spanner.  In contrast, \thmref{general-lower-bound-1d} shows that any
$f(k)$-robust $t$-spanner for the $1\times n$ grid has superlinear size.
This leads us to the following conjecture:

\begin{conj}
If $f(k)$-robust $t$-spanners with $s_f(n)$ edges exist for all one-dimensional point sets, then $O(f(k))$-robust $t$-spanners with $s_f(n)$ edges exist for all point sets in $\R^d$.
\end{conj}

Another fundamental open problem has to do with the number of edges needed
in an $O(k)$-robust $t$-spanner.  We have no upper-bound better than the
trivial $O(n^2)$ and the only lower-bound is $\Omega(n\log n)$.  This is
true even if we restrict our attention to constructing a $t$-spanner
for the 1-dimensional point set $V=\{1,\ldots,n\}$.

\section*{Acknowledgement}

This work was partly funded by NSERC and CFI.

\bibliographystyle{plainurl}
\bibliography{giant}


\end{document}

